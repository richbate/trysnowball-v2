import React, { useEffect } from 'react';
import { Link, useLocation } from 'react-router-dom';

export default function Article({ title, description, ctaHref = '/how-it-works', ctaText = 'Start your free plan', children }) {
 const location = useLocation();

 useEffect(() => { 
  document.title = `${title} — TrySnowball`; 
  
  // Dynamic meta tags for SEO
  const meta = (name, content) => {
   let el = document.querySelector(`meta[name="${name}"]`);
   if (!el) { 
    el = document.createElement('meta'); 
    el.setAttribute('name', name); 
    document.head.appendChild(el); 
   }
   el.setAttribute('content', content);
  };
  meta('description', description || 'Debt payoff guides for the UK.');
  
  // Article view tracking
  try {
   window.posthog?.capture('article_view', {
    slug: title?.toLowerCase().replace(/[^a-z0-9]+/g,'-'),
    path: location.pathname,
    referrer: document.referrer || null
   });
  } catch {}
 }, [title, description, location.pathname]);
 return (
  <article className="max-w-none">
   <h1 className="text-3xl font-bold text-gray-900 mb-4">{title}</h1>
   {description && <p className="text-lg text-gray-600 mb-6">{description}</p>}
   <div className="space-y-4 text-gray-900">{children}</div>
   <div className="mt-8">
    <Link to={ctaHref} className="inline-flex items-center gap-2 rounded-xl bg-gray-900 text-white px-4 py-2 hover:bg-black">
     {ctaText} <span aria-hidden>→</span>
    </Link>
   </div>
  </article>
 );
}