#!/usr/bin/env sh

# Pre-commit hook: Route Usage Validation
# Ensures all API routes use RouteRegistry before allowing commits

echo "ğŸ” Validating route usage..."

# Run route validation
node scripts/checkRouteUsage.js

# Exit with the same code as the validation script
exit_code=$?

if [ $exit_code -eq 0 ]; then
  echo "âœ… Route validation passed!"
else  
  echo "âŒ Route validation failed. Please fix the violations above."
  echo "ğŸ’¡ Quick fix: Use RouteHelpers.getRoute() instead of hardcoded routes"
fi

exit $exit_code