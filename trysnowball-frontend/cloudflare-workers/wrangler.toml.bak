name = "trysnowball-auth-main"
main = "auth-magic.js"
compatibility_date = "2024-11-20"
workers_dev = false

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "auth_db"
database_id = "c22c4bca-0e0c-44db-957f-5e087c660fb0"

# Environment variables (set via wrangler secret put)
# JWT_SECRET - Secret key for signing JWTs (use: wrangler secret put JWT_SECRET)
# SENDGRID_API_KEY - SendGrid API key for sending emails
# BASE_URL - Your app's base URL for magic links

[env.production]
name = "trysnowball-auth-main-prod"
routes = [
  "trysnowball.co.uk/auth/*"
]

[[env.production.d1_databases]]
binding = "DB"
database_name = "auth_db"
database_id = "c22c4bca-0e0c-44db-957f-5e087c660fb0"

[env.staging]
name = "trysnowball-auth-staging"
route = "staging-trysnowball.pages.dev/auth/*"

[[env.staging.d1_databases]]
binding = "DB"
database_name = "auth_db"
database_id = "c22c4bca-0e0c-44db-957f-5e087c660fb0"